<!--
==== =================================================================

==    /ADM/INDEX.HTML    ==
==    ADMIN PANEEL

==== =================================================================
==    Door Thijs Boerma, th.boerma@gmail.com | 2017                 ==
==== =================================================================
-->

<div id="admBROADCAST" class="adm-tab default-border col-xs-12">
  <h2><i class="fa fa-terminal"></i>&nbsp;Broadcast panel</h2>
  <p><span class="holoContrast">Note:</span> Low priority cannot overrule high priority broadcasts.</p>
  <p><span class="holoContrast">'CLEAR BROADCASTS'</span> resets the broadcasting screen.</p>

  <hr/>

  <div class="col-xs-12">
    <button class="btn btn-outline-success btn-lg btn-block" onclick="sendBroadCast(bcreset);">
      <i class="fa fa-check"></i>&nbsp;CLEAR BROADCASTS
    </button>
    <br/><br/>
  </div>

  <div class="whitespace">&nbsp;</div>
  <div class="col-xs-12">
    <p>Class: Medium priority.</p>

    <button class="btn btn-ui btn-ui-holo-red" onclick="sendBroadCast(bcblood);">
      <i class="fa fa-medkit"></i>&nbsp;DEMAND BLOOD DONATIONS
    </button>

    <button class="btn btn-ui btn-ui-holo" onclick="sendBroadCast(bcmeeting);">
      <i class="fa fa-users"></i>&nbsp;GATHER ALL COLONISTS
    </button>

  </div>

  <div class="whitespace">&nbsp;</div>
  <div class="col-xs-12">
    <p>Class: Direct threat</p>

    <button class="btn btn-ui btn-ui-holo-alt" onclick="sendBroadCast(bcbomb); ">
      <i class="fa fa-bomb"></i>&nbsp;BOMB THREAT
    </button>
    <button class="btn btn-ui btn-ui-holo-alt" onclick="sendBroadCast(bcbiohazard); ">
      <i class="fa fa-warning"></i>&nbsp;BIOHAZARD
    </button>
    <button class="btn btn-ui btn-ui-holo-alt" onclick="sendBroadCast(bcpsyhazard); ">
      <i class="fa fa-warning"></i>&nbsp;PSYHAZARD
    </button>

  </div>

  <div class="whitespace">&nbsp;</div>
  <div class="col-xs-12">
    <p>Class: Hostile Contact</p>

    <button class="btn btn-ui btn-ui-holo-red" onclick="sendBroadCast(bchostileoutside); ">
      <i class="fa fa-warning"></i>&nbsp;HOSTILES OUTSIDE
    </button>
    <button class="btn btn-ui btn-ui-holo-red" onclick="sendBroadCast(bchostileinside); ">
      <i class="fa fa-warning"></i>&nbsp;HOSTILES INSIDE
    </button>

  </div>

  <div class="whitespace">&nbsp;</div>
  <div class="col-xs-12">
    <p>Class: Announcements.</p>

    <!-- <div class="col-xs-12">
      <p>Class: Announcements</p> -->
    <button class="btn btn-ui btn-ui-holo" onclick="sendBroadCast(bchydrate);">
      <i class="fa fa-coffee"></i>&nbsp;HYDRATION REMINDER
    </button>

    <button class="btn btn-ui btn-ui-holo-alt" onclick="sendBroadCast(bcmedical);">
      <i class="fa fa-medkit"></i>&nbsp;REQUEST BLOOD DONATIONS
    </button>

  </div>
  <div class="col-xs-12">

    <button class="btn btn-ui btn-ui-holo" onclick="sendBroadCast(bclunch);">
      <i class="fa fa-cutlery"></i>&nbsp;KITCHEN: LUNCH
    </button>

    <button class="btn btn-ui btn-ui-holo" onclick="sendBroadCast(bcdinner);">
      <i class="fa fa-cutlery"></i>&nbsp;KITCHEN: DINNER
    </button>

    <button class="btn btn-ui btn-ui-holo-alt" onclick="sendBroadCast(bcdishes);">
      <i class="fa fa-cutlery"></i>&nbsp;KITCHEN: DISHES
    </button>

  </div>
  <div class="whitespace">&nbsp;</div>

</div>

<div id="admSECURITY" class="adm-tab default-border hidden col-xs-12">

  <div class="col-xs-12">
    <h2><i class="fa fa-terminal"></i>&nbsp;Colony security level</h2>
  </div>

  <div class="col-xs-12 col-md-6">
    <p>Select a pre-defined security levels.</p>

    <!--
      default security levels.
      Add, edit or remove these to your own preferences. You can set the DEFAULT security level in config.js on the server side.
    -->
    <div class="col-xs-12">
      <select id="secLevelPrefab" class="form-control" name="predefinedSecurityLevel">
        <option value="Code Green - All clear">Code Green - All clear</option>
        <option value="Code Blue - Confirmed Threat. Weapons may be visible.">Code Blue - Confirmed Threat. Weapons may be visible.</option>
        <option value="Code Red - Immediate Threat. Weapons ready.">Code Red - Immediate Threat. Weapons ready.</option>
        <option value="Code Silver - VIP on colony. Security elevated.">Code Silver - VIP on colony. Security elevated.</option>
        <option value="Class 4 Psychic Hazard">Class 4 Psychic Hazard</option>
        <option value="Class 5 Hazard Outbreak">Class 5 Hazard Outbreak</option>
        <option value="Class 6 Emergency - Extreme Imminent Threat to Bastion Eos">Class 6 Emergency - Extreme Imminent Threat to Bastion Eos</option>
      </select>
    </div>

    <div class="col-xs-12">
      <!-- submits the security level -->
      <button class="btn btn-lg btn-ui btn-ui-holo-alt" onclick="updateSecurity('secLevelPrefab');">
        <i class="fa fa-warning"></i>&nbsp;SET SECURITY LEVEL
      </button>
    </div>

  </div>

  <div class="col-xs-12 col-md-6">
    <!-- Or, write your own security status on the spot. -->
    <p>...Or, set a custom security level.</p>
    <div class="col-xs-12">
      <input id="secLevelCustom" type="text" class="form-control" placeholder="Custom Alert" maxlength="160"></input>
    </div>
    <div class="col-xs-12">

      <!-- submit the custom status -->
      <button class="btn btn-lg btn-ui btn-ui-holo-alt" onclick="updateSecurity('secLevelCustom');">
        <i class="fa fa-warning"></i>&nbsp;SET CUSTOM LEVEL
      </button>
    </div>
  </div>

  <div class="col-xs-12"><hr/></div>

  <div class="col-xs-12">
    <input id="secLevelReset" type="hidden" class="hidden" value="Code Green - All clear"/>

    <button class="btn btn-lg btn-outline-success" onclick="updateSecurity('secLevelReset');">
      <i class="fa fa-refresh"></i>&nbsp;RESET SEC. LEVEL
    </button>
  </div>

</div>

<!-- TAB: OTHER. AVAILABLE TO EVERYONE. -->
<div id="admCMD" class="adm-tab default-border hidden col-xs-12">

  <h2><i class="fa fa-terminal"></i>&nbsp;Other commands</h2>
  <hr/>

  <div class="col-xs-12">

    <button class="btn btn-danger btn-lg" onclick="FlashBlocks(); logout();">
      <i class="fa fa-remove"></i>&nbsp;LOG OUT
    </button>

  </div>

</div>

<!-- TAB: OVERLORD. ADMINS ONLY. -->
<div id="admOVERLORD" class="adm-tab default-border hidden col-xs-12">
  <h2><i class="fa fa-terminal"></i>&nbsp;Welcome, Overlord.</h2>

  <br/>

  <!-- reset the alerts/broadcasts. Placed here for extra laziness. -->
  <button class="btn btn-outline-success btn-lg btn-block" onclick="sendBroadCast(bcreset);">
    <i class="fa fa-check"></i>&nbsp;CLEAR BROADCASTS
  </button>

  <hr/>

  <!-- A few extra alerts, that you don't want non-admins to push through. -->
  <h4 class="holoContrast"><i class="fa fa-warning"></i>&nbsp;Non-public alerts</h4>

    <button
      class="btn btn-block btn-ui btn-ui-holo"
      onclick="sendBroadCast(bclowpower);">
      <i class="fa fa-bolt"></i>&nbsp;COLONY:LOW POWER WARNING
    </button>

    <button
      class="btn btn-block btn-ui btn-ui-holo-alt"
      onclick="sendBroadCast(bctransmission);">
      <i class="fa fa-rss"></i>&nbsp;INCOMING TRANSMISSION
    </button>

    <button
      class="btn btn-block btn-ui btn-ui-holo-red"
      onclick="sendBroadCast(bcviral);">
      <i class="fa fa-warning"></i>&nbsp;BIO VIRUS/UNKNOWN PATHOGEN
    </button>

    <button
      class="btn btn-block btn-ui btn-ui-holo-red"
      onclick="sendBroadCast(bcreactorcrit);">
      <i class="fa fa-bolt"></i>&nbsp;REACTOR CRITICAL
    </button>

    <button
      class="btn btn-block btn-ui btn-ui-holo-alt"
      onclick="sendBroadCast(bchackattack);">
      <i class="fa fa-user-secret"></i>&nbsp;SEC: HACKER ATTACK
    </button>

  <br/><br/>

  <!-- Force reset button: resets all dynamicdata to default, and refreshes all connected non-admin clients. -->
  <h4 class="holoContrast"><i class="fa fa-warning"></i>&nbsp;Reset all</h4>

  <div class="col-xs-12">
    <button class="btn btn-danger btn-lg" onclick="FlashBlocks('.adm-tab'); forceReset();">
      <i class="fa fa-refresh"></i>&nbsp;force reset
    </button>
  </div>

  <p>&nbsp;</p>

  <!-- Manually setting the date has temporarily been disabled due to unresolved issues. -->

  <span class="hidden">
    <div class="col-xs-12"><hr/></div>
    <h4 class="holoContrast"><i class="fa fa-calendar"></i>&nbsp;Set current date</h4>
    <br/>


      <label for="dateDay" style="padding:4px;" class="col-sm-3 text-white text-bold">Day</label>
      <div class="col-sm-9" style="padding:4px;">
        <input id="dateDay" type="text" class="form-control" placeholder="14">
      </div>

      <label for="dateMonth" style="padding:4px;" class="col-sm-3 text-white text-bold">Month</label>
      <div class="col-sm-9" style="padding:4px;">
        <input id="dateMonth" type="text" class="form-control" placeholder="MARCH">
      </div>

      <label for="dateYear" style="padding:4px;" class="col-sm-3 text-white text-bold">Year</label>
      <div class="col-sm-9" style="padding:4px;">
        <input id="dateYear" type="text" class="form-control" placeholder="240NT">
      </div>

    <br/><br/>
    <a class="btn btn-lg btn-primary"><i class="fa fa-calendar-check-o"></i>&nbsp;Change Date</a>
  </span>

  <!-- Video broadcasts and custom audio file controls. The audio files will be sent from the server (index.js) based on what files are currently in the proper folders. -->
  <div class="col-xs-12">
    <h2>MEDIA[ VIDEO &amp; AUDIO ]</h2>
    <div class="btn btn-primary" onclick="$('.hidden-block').hide();$('#OC-VID').fadeIn();">VIDEOS</div>
    <div class="btn btn-primary" onclick="$('.hidden-block').hide();$('#OC-ALICE').fadeIn();">AUDIO ALICE</div>
    <div class="btn btn-primary" onclick="$('.hidden-block').hide();$('#OC-DAVE').fadeIn();">AUDIO DAVE</div>
    <div class="btn btn-primary" onclick="$('.hidden-block').hide();$('#OC-MISC').fadeIn();">AUDIO ANDERS</div>
  </div>

  <div id="OC-VID" class="hidden-block col-xs-12" style="display:none;">
    <h4>Videos</h4>

    <div class="items">
      <p>send this before turning on the video to get player's attention.</p>
      <button class="btn btn-primary btn-ui btn-ui-holo-alt" onclick="sendBroadCast(bctransmission);">
        <i class="fa fa-file-video-o"></i>&nbsp;INCOMING TRANSMISSION
      </button>
      <button class="btn btn-outline-success" onclick="sendBroadCast(bcreset);">
        <i class="fa fa-check"></i>&nbsp;CLEAR SCREEN
      </button>
    </div>

    <div class="items">
      <button class="btn btn-ui btn-ui-holo" onclick="sendBroadCast(bcICjournaal10);">
        <i class="fa fa-film"></i>&nbsp;IC: JOURNAAL F10
      </button>
    </div>

  </div>

  <!-- 3 tabs: audio. These will contain the audio files sent by the server. -->

  <div id="OC-DAVE" class="hidden-block col-xs-12" style="display:none;">
    <h4 class="items">Audio:dave</h4>
  </div>

  <div id="OC-ALICE" class="hidden-block col-xs-12" style="display:none;">
    <h4 class="items">Audio:alice</h4>
  </div>

  <div id="OC-MISC" class="hidden-block col-xs-12" style="display:none;">
    <h4 class="items">Audio:misc</h4>
  </div>

</div>


<!-- TAB: PORTAL CONTROL, ACCESSIBLE BY RANK 3 AND 4 ONLY. -->
<div id="admPORTAL" class="adm-tab default-border hidden col-xs-12">

  <h2><i class="fa fa-terminal"></i>&nbsp;Portal Terminal</h2>

  <hr/>

  <div class="col-xs-12">
    <button class="btn btn-outline-success btn-lg btn-block" onclick="sendBroadCast(bcreset);">
      <i class="fa fa-check"></i>&nbsp;CLEAR BROADCASTS
    </button>
    <br/><br/>
  </div>

  <div class="col-xs-12 col-md-6">
    <p>Broadcast:</p>

    <button class="btn btn-lg btn-ui btn-ui-holo" onclick="sendBroadCast(bcportalinc);">
      <i class="fa fa-cloud-download"></i>&nbsp;PORTAL INCOMING
    </button>
    <button class="btn btn-lg btn-ui btn-ui-holo-alt" onclick="sendBroadCast(bcportalout);">
      <i class="fa fa-cloud-upload"></i>&nbsp;PORTAL OUTGOING
    </button>

    <p>&nbsp;</p>

  </div>
  <div class="col-xs-12 col-md-6">
    <p>&nbsp;Portal Status:</p>
    <p>&nbsp;(note: portal inc/outgoing temporarily sets the status to ACTIVE.)</p>

    <div class="col-xs-12" style="margin-left: 11px;">
      <select id="portalStatusForm" class="form-control" name="portalStatusForm">
        <option value="ok">Normal / Standard / Ok</option>
        <option value="active">Active/Inc/Out</option>
        <option value="shutdown">Portal offline</option>
        <option value="unstable">Unstable connection</option>
        <option value="multirequest">Multiple external requests</option>
        <option value="maintenance">Maintenance Required</option>
      </select>
    </div>

    <div class="col-xs-12">
      <button class="btn btn-lg btn-ui btn-primary" onclick="updatePortalStatus('portalStatusForm');">
        <i class="fa fa-cog"></i>&nbsp;SET PORTAL STATUS
      </button>
    </div>


  </div>

</div>

<!-- TAB: ATTACK VECTOR. -->
<div id="admATTACKVECTOR" class="adm-tab default-border hidden col-xs-12" >
    <iframe src="https://av.eosfrontier.space/beacon/" height="600" width="100%" style="border:none;">></iframe>
</div>



<script>

$(document).ready(function() {
  $('button').on('click', function(e){

    /* extra scripts: add a modifier to prevent disabled buttons from being used regardless. */
    if($(this).attr('disabled')){
      e.stopImmediatePropagation();
      e.preventDefault();
    }

    /* disable buttons temporarily to prevent spamming */
    $('button').addClass('disabled').attr("disabled", true);

    /* remove the disabled modifier after an XXXX amount of miliseconds. */
    setTimeout(function(){
      $('button').removeClass('disabled').attr("disabled", false);
      $('#main').find('.adm-tab').removeClass('flash');
    },3500);
  });


  /* receive media files from the server (audio-misc) and convert the received data into buttons. */
  socket.on('sendMediaMisc', function(resultArray){
    /*$(resultArray).each(function(key, value){*/

      /* &apos; is turned into single quotes around the file path by the browser, without, the buttons simply do not work. */
      /*var clickThis = " onclick=\"broadcastAudio(&apos;/audio-misc/" + value + "&apos;);\"";

      $('#OC-MISC').append('<div class=\"btn btn-default\"' + clickThis +' ><i class=\"fa fa-file-audio-o\"></i>&nbsp;' + value +'</div>');*/
    /*});*/
    var l = resultArray.length;
    for(var i=0;i<l; i++) {
      /* &apos; is turned into single quotes around the file path by the browser, without, the buttons simply do not work. */
      var clickThis = " onclick=\"broadcastAudio(&apos;/audio-misc/" + resultArray[i] + "&apos;);\"";
      $('#OC-MISC').append('<div class=\"btn btn-default\"' + clickThis +' ><i class=\"fa fa-file-audio-o\"></i>&nbsp;' + resultArray[i] +'</div>');
    }
  });

  /* first copy of audio-misc for the AI voices. */
  socket.on('sendMediaDave', function(arrayDave){
    var l = arrayDave.length;
    for(var i=0;i<l; i++) {
      var clickThis = " onclick=\"broadcastAudio(&apos;/audio-dave/" + arrayDave[i] + "&apos;);\"";
      $('#OC-DAVE').append('<div class=\"btn btn-default\"' + clickThis +' ><i class=\"fa fa-file-audio-o\"></i>&nbsp;' + arrayDave[i] +'</div>');
    }

  });

  /* second copy of audio-misc for the AI voices. */
  socket.on('sendMediaAlice', function(arrayAlice){
    var l = arrayAlice.length;
    for(var i=0;i<l; i++) {
      var clickThis = " onclick=\"broadcastAudio(&apos;/audio-alice/" + arrayAlice[i] + "&apos;);\"";
      $('#OC-ALICE').append('<div class=\"btn btn-default\"' + clickThis +' ><i class=\"fa fa-file-audio-o\"></i>&nbsp;' + arrayAlice[i] +'</div>');
    }
  });

});
</script>
